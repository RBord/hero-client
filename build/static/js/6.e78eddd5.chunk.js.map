{"version":3,"sources":["views/detailsPage/DetailsPage.module.css","views/detailsPage/DetailsPage.jsx","services/hero-api.js","components/loader/Loader.jsx","components/loader/Loader.module.css","views/editHeroPage/EditHeroPage.module.css","views/editHeroPage/EditHeroPage.jsx"],"names":["module","exports","DetailsPage","history","useHistory","location","useLocation","heroId","useParams","useState","hero","setHero","isDeleting","setIsDeleting","needEdit","setNeedEdit","loading","setLoading","evt","a","preventDefault","supheroAPI","then","res","console","log","useEffect","getHeroById","nickname","className","s","wrapper","src","images","alt","image","infoContainer","real_name","superpowers","origin_description","catch_phrase","wrapperBtns","type","onClick","push","state","from","btn","to","props","fetchAllHeroes","axios","get","data","fetchHeroById","id","updateHeroInfoById","patch","sendHeroToBase","post","deleteHeroById","delete","updateImageOfHero","defaults","baseURL","Spinner","Container","color","height","width","timeout","React","Component","EditHeroPage","nick","setNick","realName","setRealName","powers","setPowers","descr","setDescription","phras","setPhrase","selectedFile","setSelectedFile","isEdited","setIsEdited","_id","handleChange","currentTarget","name","value","reset","superhero","formData","FormData","append","maxWidth","label","margin","required","variant","size","fullWidth","onChange","multiline","rows","btnWrapper","htmlFor","accept","multiple","target","files","input","component","href"],"mappings":"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","file":"static/js/6.e78eddd5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"DetailsPage_wrapper__2bEXk\",\"infoContainer\":\"DetailsPage_infoContainer__2f8qi\",\"image\":\"DetailsPage_image__2TLUc\",\"wrapperBtns\":\"DetailsPage_wrapperBtns__3AwGX\",\"btn\":\"DetailsPage_btn__1qQ6i\"};","import {useState, useEffect} from 'react'\nimport {useLocation, useHistory, useParams, Redirect} from 'react-router-dom'\nimport EditHeroPage from '../editHeroPage/EditHeroPage'\nimport Spinner from '../../components/loader/Loader'\nimport s from './DetailsPage.module.css'\nimport * as supheroAPI from '../../services/hero-api'\n\nexport default function DetailsPage(){\n    const history = useHistory()\n    const location = useLocation()\n    const {heroId} = useParams()\n\n    const [hero, setHero] = useState(null)\n    const [isDeleting, setIsDeleting] = useState(false)\n    const [needEdit, setNeedEdit] = useState(false)\n    const [loading, setLoading] = useState(false)\n\n    useEffect(()=>{\n        setLoading(true)\n        async function getHeroById(){\n            await supheroAPI.fetchHeroById(heroId).then(setHero)\n            setLoading(false)\n        }\n        getHeroById()\n    }, [heroId])\n\n    function onGoBack(){\n        history.push(location.state?.from)\n    }\n\n    function needEditHero(){\n        setNeedEdit(true)\n    }\n    \n    async function onDelete(evt){\n        evt.preventDefault()\n\n        await supheroAPI.deleteHeroById(heroId).then(res => console.log(res))\n        setIsDeleting(true)\n    }\n\n    return (\n        <>\n        {hero && !needEdit && !loading &&(\n            <>\n                <h1>Detail information about {hero.nickname}</h1>\n                <div className={s.wrapper}>\n                    <img src={`https://create-hero-app.herokuapp.com${hero.images}`} alt=\"image_of_hero\" className={s.image}/>\n                    <div className={s.infoContainer}>\n                        <p><b>Real name: </b>{hero.real_name}</p>\n                        <p><b>Superpowers: </b>{hero.superpowers}</p>\n                        <p><b>Description: </b>{hero.origin_description}</p>\n                        <p><b>Catch Phrase: </b>{hero.catch_phrase}</p>\n                    </div>\n                </div>\n                <div className={s.wrapperBtns}>\n                    <button type='button' onClick={onGoBack} className={s.btn}>BACK</button>\n                    <button type='submit' onClick={onDelete} className={s.btn}>DELETE HERO FROM BASE</button>\n                    <button type='button' onClick={needEditHero} className={s.btn}>EDIT HERO</button>\n                </div>\n                \n            </>\n        )}\n        {isDeleting && <Redirect to=\"/heroes\" />}\n        {needEdit && (<EditHeroPage props={hero}/>)}\n        {loading && <Spinner/>}\n        </>\n    )\n}","import axios from 'axios'\n\naxios.defaults.baseURL = 'https://create-hero-app.herokuapp.com/api'\n\nexport async function fetchAllHeroes() {\n  return await axios.get('/superheroes').then((res) => res.data.data)\n}\n\nexport async function fetchHeroById(id) {\n  return await axios.get(`/superheroes/${id}`).then((res) => res.data.data)\n}\n\nexport async function updateHeroInfoById(id, data) {\n  return await axios\n    .patch(`/superheroes/${id}`, data)\n    .then((res) => res.data.data)\n}\n\nexport async function sendHeroToBase(data) {\n  return await axios.post('/superheroes', data).then((res) => res.data.data)\n}\n\nexport async function deleteHeroById(id) {\n  return await axios.delete(`/superheroes/${id}`).then((res) => res.data.data)\n}\n\nexport async function updateImageOfHero(id, data) {\n  return await axios.post(`/images/${id}`, data).then((res) => res.data.data)\n}\n","import React from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport s from './Loader.module.css';\n\nclass Spinner extends React.Component {\n  render() {\n    return (\n        <div className={s.Container}>\n            <Loader\n                type=\"TailSpin\"\n                color=\"#00BFFF\"\n                height={50}\n                width={50}\n                timeout={0}\n            />\n      </div>\n    );\n  }\n}\nexport default Spinner;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Loader_Container__hnGsc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnWrapper\":\"EditHeroPage_btnWrapper__1CHhO\",\"input\":\"EditHeroPage_input__36pKR\"};","import {useState, useEffect} from 'react'\nimport { Redirect, useLocation, useHistory} from 'react-router-dom'\nimport { TextField, Container, Button, Input} from '@mui/material'\n\nimport s from './EditHeroPage.module.css'\nimport * as supheroAPI from '../../services/hero-api'\n\n\nexport default function EditHeroPage(props) {\n    const location = useLocation()\n    const history = useHistory()\n\n    const [nick, setNick] = useState('')\n    const [realName, setRealName] = useState('')\n    const [powers, setPowers] = useState('')\n    const [descr, setDescription] = useState('')\n    const [phras, setPhrase] = useState('')\n\n    const [selectedFile, setSelectedFile] = useState('')\n\n    const [isEdited, setIsEdited] = useState(false)\n\n    const {_id, nickname, real_name, superpowers, origin_description, catch_phrase} = props.props\n    \n    useEffect(() => {\n        setNick(nickname)\n        setRealName(real_name)\n        setPowers(superpowers)\n        setDescription(origin_description)\n        setPhrase(catch_phrase)\n    }, [nickname, real_name, superpowers, origin_description, catch_phrase])\n\n    function handleChange (evt) {\n        const {name, value} = evt.currentTarget;\n        switch (name) {\n            case 'nickname':\n                setNick(value)\n                break\n                case 'real_name':\n                    setRealName(value)\n                    break\n                    case 'superpowers':\n                        setPowers(value)\n                        break\n                        case 'origin_description':\n                            setDescription(value)\n                            break\n                            case 'catch_phrase':\n                                setPhrase(value)\n                                break\n                        default:\n                            return\n        }\n    }\n    function reset(){\n        setNick('')\n        setRealName('')\n        setPowers('')\n        setPhrase('')\n        setDescription('')\n    }\n\n    function onGoBack(){\n        history.push(location.state?.from)\n    }\n\n    function handleImageInput(evt){\n        setSelectedFile(evt.target.files[0])\n    }\n\n    async function handleSubmit(evt){\n        evt.preventDefault()\n\n        const superhero = {\n            nickname: nick,\n            real_name: realName,\n            superpowers: powers,\n            origin_description: descr,\n            catch_phrase: phras\n        }\n\n        await supheroAPI.updateHeroInfoById(_id, superhero).then(res => console.log(res))\n        reset()\n        setIsEdited(true)\n\n        if(selectedFile){\n            const formData = new FormData()\n            formData.append(\"name\", nick)\n            formData.append(\"image\", selectedFile)\n\n            await supheroAPI.updateImageOfHero(_id, formData).then(res => console.log(res))\n        }\n    }\n\n    return (\n        <>\n        {!isEdited ? (\n            <>\n            <h1>\n                Edit {nickname}\n            </h1>\n            <Container maxWidth=\"sm\">\n                <TextField id=\"outlined-basic\" label=\"Nickname\" margin=\"normal\" required variant=\"outlined\" size='small' fullWidth name='nickname' value={nick} onChange={handleChange}/>\n                <TextField id=\"outlined-basic\" label=\"Real Name\" margin=\"normal\" required variant=\"outlined\" size='small' fullWidth name='real_name' value={realName} onChange={handleChange} />\n                <TextField id=\"outlined-multiline-static\" label=\"Superpowers\" margin=\"normal\" required multiline rows={6} fullWidth name='superpowers' value={powers} onChange={handleChange} />\n                <TextField id=\"outlined-multiline-static\" label=\"Description\" margin=\"normal\" multiline rows={6}  fullWidth name='origin_description' value={descr} onChange={handleChange} />\n                <TextField id=\"outlined-multiline-static\" label=\"Catch Phrase\" margin=\"normal\" multiline rows={6}  fullWidth name='catch_phrase' value={phras} onChange={handleChange} />\n                <div className={s.btnWrapper}>\n                    <label htmlFor=\"contained-button-file\">\n                        <Input accept=\"image/*\" id=\"contained-button-file\" multiple type=\"file\" onChange={handleImageInput} className={s.input}/>\n                        <Button variant=\"contained\" component=\"span\">\n                            Upload\n                        </Button>\n                    </label>\n                    <Button variant=\"contained\" href=\"#contained-buttons\" onClick={handleSubmit}>\n                        ADD\n                    </Button>\n                    <Button variant=\"contained\" href=\"#contained-buttons\" onClick={onGoBack}>\n                        BACK\n                    </Button>\n                </div>\n            </Container>\n            </>\n        ) : <Redirect to='/heroes'/>}\n        </>\n    )\n}"],"sourceRoot":""}