{"version":3,"sources":["services/hero-api.js","views/editHeroPage/EditHeroPage.module.css","views/editHeroPage/EditHeroPage.jsx"],"names":["fetchAllHeroes","a","axios","get","then","res","data","fetchHeroById","id","updateHeroInfoById","patch","sendHeroToBase","post","deleteHeroById","delete","updateImageOfHero","defaults","baseURL","module","exports","EditHeroPage","props","location","useLocation","history","useHistory","useState","nick","setNick","realName","setRealName","powers","setPowers","descr","setDescription","phras","setPhrase","selectedFile","setSelectedFile","isEdited","setIsEdited","_id","nickname","real_name","superpowers","origin_description","catch_phrase","handleChange","evt","currentTarget","name","value","reset","preventDefault","superhero","supheroAPI","console","log","formData","FormData","append","useEffect","to","maxWidth","label","margin","required","variant","size","fullWidth","onChange","multiline","rows","className","s","btnWrapper","htmlFor","accept","multiple","type","target","files","input","component","href","onClick","push","state","from"],"mappings":"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","file":"static/js/9.55cce422.chunk.js","sourcesContent":["import axios from 'axios'\n\naxios.defaults.baseURL = 'https://create-hero-app.herokuapp.com/api'\n\nexport async function fetchAllHeroes() {\n  return await axios.get('/superheroes').then((res) => res.data.data)\n}\n\nexport async function fetchHeroById(id) {\n  return await axios.get(`/superheroes/${id}`).then((res) => res.data.data)\n}\n\nexport async function updateHeroInfoById(id, data) {\n  return await axios\n    .patch(`/superheroes/${id}`, data)\n    .then((res) => res.data.data)\n}\n\nexport async function sendHeroToBase(data) {\n  return await axios.post('/superheroes', data).then((res) => res.data.data)\n}\n\nexport async function deleteHeroById(id) {\n  return await axios.delete(`/superheroes/${id}`).then((res) => res.data.data)\n}\n\nexport async function updateImageOfHero(id, data) {\n  return await axios.post(`/images/${id}`, data).then((res) => res.data.data)\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnWrapper\":\"EditHeroPage_btnWrapper__1CHhO\",\"input\":\"EditHeroPage_input__36pKR\"};","import {useState, useEffect} from 'react'\nimport { Redirect, useLocation, useHistory} from 'react-router-dom'\nimport { TextField, Container, Button, Input} from '@mui/material'\n\nimport s from './EditHeroPage.module.css'\nimport * as supheroAPI from '../../services/hero-api'\n\n\nexport default function EditHeroPage(props) {\n    const location = useLocation()\n    const history = useHistory()\n\n    const [nick, setNick] = useState('')\n    const [realName, setRealName] = useState('')\n    const [powers, setPowers] = useState('')\n    const [descr, setDescription] = useState('')\n    const [phras, setPhrase] = useState('')\n\n    const [selectedFile, setSelectedFile] = useState('')\n\n    const [isEdited, setIsEdited] = useState(false)\n\n    const {_id, nickname, real_name, superpowers, origin_description, catch_phrase} = props.props\n    \n    useEffect(() => {\n        setNick(nickname)\n        setRealName(real_name)\n        setPowers(superpowers)\n        setDescription(origin_description)\n        setPhrase(catch_phrase)\n    }, [nickname, real_name, superpowers, origin_description, catch_phrase])\n\n    function handleChange (evt) {\n        const {name, value} = evt.currentTarget;\n        switch (name) {\n            case 'nickname':\n                setNick(value)\n                break\n                case 'real_name':\n                    setRealName(value)\n                    break\n                    case 'superpowers':\n                        setPowers(value)\n                        break\n                        case 'origin_description':\n                            setDescription(value)\n                            break\n                            case 'catch_phrase':\n                                setPhrase(value)\n                                break\n                        default:\n                            return\n        }\n    }\n    function reset(){\n        setNick('')\n        setRealName('')\n        setPowers('')\n        setPhrase('')\n        setDescription('')\n    }\n\n    function onGoBack(){\n        history.push(location.state?.from)\n    }\n\n    function handleImageInput(evt){\n        setSelectedFile(evt.target.files[0])\n    }\n\n    async function handleSubmit(evt){\n        evt.preventDefault()\n\n        const superhero = {\n            nickname: nick,\n            real_name: realName,\n            superpowers: powers,\n            origin_description: descr,\n            catch_phrase: phras\n        }\n\n        await supheroAPI.updateHeroInfoById(_id, superhero).then(res => console.log(res))\n        reset()\n        setIsEdited(true)\n\n        if(selectedFile){\n            const formData = new FormData()\n            formData.append(\"name\", nick)\n            formData.append(\"image\", selectedFile)\n\n            await supheroAPI.updateImageOfHero(_id, formData).then(res => console.log(res))\n        }\n    }\n\n    return (\n        <>\n        {!isEdited ? (\n            <>\n            <h1>\n                Edit {nickname}\n            </h1>\n            <Container maxWidth=\"sm\">\n                <TextField id=\"outlined-basic\" label=\"Nickname\" margin=\"normal\" required variant=\"outlined\" size='small' fullWidth name='nickname' value={nick} onChange={handleChange}/>\n                <TextField id=\"outlined-basic\" label=\"Real Name\" margin=\"normal\" required variant=\"outlined\" size='small' fullWidth name='real_name' value={realName} onChange={handleChange} />\n                <TextField id=\"outlined-multiline-static\" label=\"Superpowers\" margin=\"normal\" required multiline rows={6} fullWidth name='superpowers' value={powers} onChange={handleChange} />\n                <TextField id=\"outlined-multiline-static\" label=\"Description\" margin=\"normal\" multiline rows={6}  fullWidth name='origin_description' value={descr} onChange={handleChange} />\n                <TextField id=\"outlined-multiline-static\" label=\"Catch Phrase\" margin=\"normal\" multiline rows={6}  fullWidth name='catch_phrase' value={phras} onChange={handleChange} />\n                <div className={s.btnWrapper}>\n                    <label htmlFor=\"contained-button-file\">\n                        <Input accept=\"image/*\" id=\"contained-button-file\" multiple type=\"file\" onChange={handleImageInput} className={s.input}/>\n                        <Button variant=\"contained\" component=\"span\">\n                            Upload\n                        </Button>\n                    </label>\n                    <Button variant=\"contained\" href=\"#contained-buttons\" onClick={handleSubmit}>\n                        ADD\n                    </Button>\n                    <Button variant=\"contained\" href=\"#contained-buttons\" onClick={onGoBack}>\n                        BACK\n                    </Button>\n                </div>\n            </Container>\n            </>\n        ) : <Redirect to='/heroes'/>}\n        </>\n    )\n}"],"sourceRoot":""}